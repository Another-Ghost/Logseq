alias:: fork 函数, fork

- 既然我们理解了虚拟内存和内存映射，那么我们可以清晰地知道 fork函数是如何创建一个带有自己独立虚拟地址空间的新进程的。当 fork函数被当前进程调用时，内核为新进程创建各种数据结构，并分配给它一个唯一的 PID。为了给这个新进程创建虚拟内存，它创建了当前进程的 mm_struct、区域结构和页表的原样副本。它将两个进程中的每个页面都标记为只读，并将两个进程中的每个区域结构都标记为私有的写时复制。当 fork在新进程中返回时，新进程现在的虚拟内存刚好和调用 fork时存在的虚拟内存相同。当这两个进程中的任一个后来进行写操作时，写时复制机制就会创建新页面，因此，也就为每个进程保持了私有地址空间的抽象概念。
- fork函数用来 *创建* 一个带有自己独立[[虚拟地址空间]]的新[[进程]]的。
  当[[fork 函数]]被当前[[进程]]调用时，[[内核]]为 *新进程* 创建各种数据结构，并分配给它一个唯一的[[PID]]。为了给这个新进程创建[[虚拟内存]]，它创建了当前进程的[[mm_struct]]、[[区域结构]]和[[页表]]的**精确副本**。
  它将两个进程中的**每个页面**都标记为[[只读]]，并将两个进程中的每个区域结构都标记为[[私有的写时复制]]。
  当 `fork` 在新进程中**返回**时，新进程现在的虚拟内存刚好和调用 fork 时存在的虚拟内存**相同**。
  当这两个进程中的任一个后来进行[[写操作]]时，[[写时复制]]机制就会创建新页面，因此，也就为每个进程保持了[[私有地址空间]]的抽象概念。
-
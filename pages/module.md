alias:: 模块

- #C++20
- [[模块]]是C++20标准引入的一个重要特性，旨在改善大型代码库的编译时间和可维护性。模块提供了一种替代传统[[头文件]]的机制，以更有效的方式组织和使用代码。以下是一些关于C++模块的基本概念：
- ## 概念
	- 1. **模块的定义**：模块是一种新的编程构造，允许将代码和数据封装在一起，与程序的其他部分隔离。
	- 2. **替代头文件**：模块旨在解决头文件可能导致的各种问题，如重复包含、命名冲突和长编译时间。
- ## 语法
	- ### 定义模块
		- 1. **模块声明**：
			- `export module ModuleName;`
			- 这是模块定义的起始点，其中 `ModuleName` 是你给模块起的名字。
		- 2. **导出声明**：
			- `export { /* declarations */ }`
			- 在大括号中，你可以放置任何你希望导出的函数、类、变量等声明。只有这些导出的声明才能被模块的使用者访问。
	- ### 导入模块
		- **导入语句**：
			- `import ModuleName;`
			- 这个语句用于在另一个文件中导入模块。这样，该文件就可以使用模块中导出的所有声明。
- ## 示例
  
  假设我们有一个模块 `mymodule`，包含一个导出的函数 `add`：
  
  ```cpp
  // mymodule.cpp
  export module mymodule;
  
  export int add(int a, int b) {
    return a + b;
  }
  ```
  
  在另一个文件中，我们可以这样导入并使用这个模块：
  
  ```cpp
  // main.cpp
  import mymodule;
  
  #include <iostream>
  
  int main() {
    std::cout << "The sum of 3 and 4 is " << add(3, 4) << std::endl;
    return 0;
  }
  ```
- ## 优点
	- 1. **提高编译速度**：模块只需被编译一次，之后可以被多个源文件重用。
	- 2. **避免宏污染**：传统的预处理器宏可能会导致复杂的依赖和错误，模块通过更干净的接口避免了这些问题。
	- 3. **更好的封装和隔离**：模块提供了更好的代码封装和隔离机制。
- ## 注意事项
  
  1. **模块的命名**：模块名通常应该是唯一的，避免与其他模块冲突。
  2. **文件结构**：虽然模块可以帮助组织代码，但模块本身并不强制任何特定的文件结构。
  4. **构建系统**：在使用模块时，可能需要调整构建系统以处理模块化代码的编译和链接。
- ## 和[[头文件]]差异
	- 头文件和模块的差异不仅是语法上的。
		- 一个模块只会[[编译]]一遍(而不是在使用它的每个编译单元中都编译一遍)。
		- 两个模块可以按**任意顺序**导入 (import)而不会改变它们的含义。
		- 如果你将一些东西导入一个模块中，则模块的使用者不会隐式获得这些东西的访问权(但也不会被它们所困扰): [[import]]无传递性。这些差异对可维护性和编译时性能的影响是惊人的。